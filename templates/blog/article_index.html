{% extends 'share_layout/base.html' %}
{% load blog_tags %}
{% load cache %}
{% load i18n %}
{% block header %}
    <!-- 基础SEO标签（由视图层提供） -->
    <title>{{ seo_title|default:SITE_NAME }}</title>
    <meta name="description" content="{{ seo_description|default:SITE_SEO_DESCRIPTION }}"/>
    <meta name="keywords" content="{{ seo_keywords|default:SITE_KEYWORDS }}"/>
    <link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}"/>
    
    <!-- Open Graph 基础标签 -->
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="{{ seo_title|default:SITE_NAME }}"/>
    <meta property="og:description" content="{{ seo_description|default:SITE_DESCRIPTION }}"/>
    <meta property="og:url" content="{{ request.get_full_path|urlencode }}"/>
    <meta property="og:site_name" content="{{ SITE_NAME }}"/>
{% endblock %}
{% block content %}
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start">
        <!-- 主内容区域 - 调整为9列，给主内容更多空间 -->
        <div id="primary" class="site-content lg:col-span-8">
            {% if page_type and tag_name %}
                <!-- 面包屑导航 -->
                <nav aria-label="breadcrumb" class="breadcrumb-nav">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="/" class="breadcrumb-link">
                                <svg class="breadcrumb-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                                </svg>
                                {% trans 'Home' %}
                            </a>
                        </li>
                        <li class="breadcrumb-separator" aria-hidden="true">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </li>
                        <li class="breadcrumb-item">
                            <span class="breadcrumb-current">{{ page_type }}: {{ tag_name }}</span>
                        </li>
                    </ol>
                </nav>

                <header class="archive-header mb-6">
                    <p class="archive-title text-2xl font-bold">{{ page_type }}：<span class="text-primary-600 dark:text-primary-400">{{ tag_name }}</span></p>
                </header><!-- .archive-header -->
            {% endif %}

            <div id="article-list-container">
                <div id="content" role="main" class="space-y-6">
                    {% for article in article_list %}
                        {% load_article_detail article True user %}
                    {% endfor %}
                </div><!-- #content -->

                {% if is_paginated %}
                    {% load_pagination_info page_obj page_type tag_name %}
                {% endif %}
            </div><!-- #article-list-container -->
        </div><!-- #primary -->

        <!-- 侧边栏 - 调整为3列，更紧凑 -->
        <aside id="secondary" class="widget-area lg:col-span-4">
            {% load_sidebar user linktype %}
        </aside>
    </div>
{% endblock %}